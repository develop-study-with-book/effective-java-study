
# 이펙티브 자바 아이템 41: 정의하려는 것이 타입이라면 마커 인터페이스를 사용하라

## 개요
아이템 41에서는 마커 인터페이스(Marker Interface)와 마커 애너테이션의 사용 시점을 구분하고, 마커 인터페이스를 언제 사용해야 하는지에 대해 설명한다. 마커 인터페이스는 특정 타입을 나타내기 위해 사용되며, 인터페이스에 메서드가 없다는 점에서 일반적인 인터페이스와 다르다.

## 핵심 내용

### 1. 마커 인터페이스란?
마커 인터페이스는 메서드가 없는 인터페이스로, 오직 특정 클래스가 그 인터페이스를 구현하고 있음을 나타내기 위해 사용된다. 이러한 인터페이스는 클래스가 특정 타입임을 나타내며, 해당 클래스가 특정 기능을 제공하거나 특정 규칙을 준수해야 함을 의미할 수 있다.

#### 예시 코드

```java
public interface Serializable {
    // 메서드가 없는 마커 인터페이스
}
```

Java의 `Serializable` 인터페이스는 마커 인터페이스의 대표적인 예로, 클래스가 이 인터페이스를 구현하면 객체를 직렬화할 수 있음을 나타낸다.

### 2. 마커 인터페이스와 마커 애너테이션 비교
마커 인터페이스와 마커 애너테이션은 둘 다 클래스가 특정 기능을 갖고 있음을 나타내기 위해 사용될 수 있다. 그러나 둘 사이에는 몇 가지 중요한 차이점이 있다.

#### 마커 인터페이스의 장점
- **타입 검사**: 마커 인터페이스는 컴파일 타임에 타입 검사를 제공하므로, 잘못된 클래스가 해당 기능을 사용하려 할 때 컴파일러가 이를 잡아낼 수 있다.
- **문서화**: 클래스가 특정 마커 인터페이스를 구현하고 있음을 명확히 보여주기 때문에, 그 클래스가 무엇을 지원하는지에 대해 더 명확하게 문서화된다.

#### 마커 애너테이션의 장점
- **유연성**: 애너테이션은 메타데이터를 추가하기 위한 용도로 사용되며, 런타임에 다양한 정보를 제공할 수 있다.
- **레거시 코드 적용**: 기존 클래스나 인터페이스에 마커 애너테이션을 추가하는 것이 더 쉬울 수 있다.

### 3. 마커 인터페이스 사용의 적절한 시점
마커 인터페이스는 "타입"을 정의할 때 적합하다. 즉, 특정 클래스가 특정 타입임을 나타내고, 그 타입에 따라 다른 클래스 또는 메서드가 동작해야 할 때 마커 인터페이스를 사용하는 것이 좋다.

#### 예시 코드: 클론 가능 여부를 나타내는 마커 인터페이스

```java
public interface Cloneable {
    // 마커 인터페이스: 클론 가능 여부를 나타냄
}

public class MyClass implements Cloneable {
    @Override
    protected Object clone() throws CloneNotSupportedException {
        return super.clone();
    }
}
```

위 예제에서 `Cloneable` 인터페이스는 객체가 안전하게 클론될 수 있음을 나타낸다. 이는 마커 인터페이스가 특정 타입을 나타내기 위해 사용될 수 있는 좋은 예이다.

### 4. 마커 애너테이션 사용의 적절한 시점
마커 애너테이션은 메타데이터를 추가할 때나 특정 동작을 실행하기 위한 신호로 사용된다. 마커 인터페이스가 아닌 마커 애너테이션을 사용해야 하는 상황은 다음과 같다:
- **타입이 아닌 속성을 정의할 때**: 클래스의 특정 메서드나 필드에 특정 속성을 부여하고 싶을 때, 마커 애너테이션을 사용하는 것이 적절하다.
- **레거시 코드**: 기존 코드에 쉽게 적용할 수 있다.

#### 예시 코드: 테스트 메서드를 나타내는 마커 애너테이션

```java
import java.lang.annotation.*;

@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface Test {
    // 마커 애너테이션: 이 메서드는 테스트 메서드임을 나타냄
}

public class MyTests {

    @Test
    public void someTest() {
        // 테스트 코드
    }
}
```

### 5. 마커 인터페이스와 애너테이션의 혼용
마커 인터페이스와 애너테이션을 혼용하는 경우도 있다. 예를 들어, Java의 `Serializable` 인터페이스는 마커 인터페이스로, 클래스가 직렬화 가능한 타입임을 나타낸다. 동시에, 직렬화 과정에서 제외할 필드를 나타내기 위해 `transient` 키워드나 애너테이션을 사용할 수 있다. 이러한 혼용을 통해 코드의 가독성과 유연성을 높일 수 있다.

### 6. 잘못된 사용 사례
마커 인터페이스를 사용해선 안 되는 경우는 다음과 같다:
- **타입이 아닌 정보를 정의할 때**: 마커 인터페이스는 타입을 정의하는 데 사용되므로, 타입이 아닌 정보(예: 메서드에 대한 추가 정보)를 나타내기 위해 사용해서는 안 된다.
- **마커 인터페이스가 너무 자주 사용될 때**: 과도하게 사용하면 코드가 복잡해지고 유지보수가 어려워질 수 있다.

## 요약
- 마커 인터페이스는 특정 타입을 나타내기 위해 사용되며, 컴파일 타임에 타입 검사를 제공한다.
- 마커 애너테이션은 메타데이터를 추가하거나 런타임에 특정 동작을 트리거하기 위해 사용된다.
- 특정 클래스가 특정 타입임을 나타내고, 해당 타입에 따라 동작이 달라져야 할 때는 마커 인터페이스를 사용하라.
- 반대로, 속성을 정의하거나 레거시 코드에 적용할 때는 마커 애너테이션을 사용하는 것이 좋다.

마커 인터페이스와 애너테이션의 적절한 사용을 통해 코드의 명확성을 높이고, 유지보수성을 향상시킬 수 있다.
