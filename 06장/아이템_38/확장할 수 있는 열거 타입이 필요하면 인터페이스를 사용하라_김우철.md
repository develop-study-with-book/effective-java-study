## ì•„ì´í…œ 38. í™•ì¥í•  ìˆ˜ ìˆëŠ” ì—´ê±° íƒ€ì…ì´ í•„ìš”í•˜ë©´ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë¼

### íƒ€ì… ì•ˆì „ ì—´ê±° íŒ¨í„´

```java
public class TypesafeOperation {
    private final String type;
    private TypesafeOperation(String type) {
        this.type = type;
    }

    public String toString() {
        return type;
    }
    
    public static final TypesafeOperation PLUS = new TypesafeOperation("+");
    public static final TypesafeOperation MINUS = new TypesafeOperation("-");
    public static final TypesafeOperation TIMES = new TypesafeOperation("*");
    public static final TypesafeOperation DIVIDE = new TypesafeOperation("/");
}
```
- íƒ€ì… ì•ˆì „ ì—´ê±° íŒ¨í„´ì€ ìµœì´ˆ ì •ì˜ëœ ê°ì²´ë§Œ ì°¸ì¡°í•  ìˆ˜ ìˆëŠ”ë° ìë°” 1.5ì´í›„ë¡œëŠ” ì¼ë°˜ì ìœ¼ë¡  enumì„ ì‚¬ìš©í•œë‹¤.
- enumê³¼ì˜ ì°¨ì´ì ì€ íƒ€ì… ì•ˆì „ ì—´ê±° íƒ€ì…ì€ í™•ì¥(extends)ê°€ ê°€ëŠ¥í•˜ì§€ë§Œ, enumì€ í™•ì¥ì´ ë¶ˆê°€ëŠ¥ í•˜ë‹¤.
    - ìë°”ëŠ” ë‹¤ì¤‘ ìƒì†ì„ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë° ëª¨ë“  Enumì€ java.lang.Enum í´ë˜ìŠ¤ë¥¼ ìƒì† ë°›ê³  ìˆë‹¤.

- enumì„ í™•ì¥í•˜ëŠ” ê±´ ì¢‹ì§€ ì•Šë‹¤.
    - enumì˜ ë³¸ë˜ ëª©ì ì€ ê³ ì •ëœ ê°’ì˜ ì§‘í•©ì„ í‘œí˜„í•˜ëŠ” ê²ƒì´ë‹¤.

    ```java
    enum BasicOperation {
        PLUS, MINUS;
    }
    
    enum ExtendedOperation extends BasicOperation {
        TIMES, DIVIDE;
    }
    ```

    - í•˜ìœ„ ìƒìˆ˜ì¸ ExtendedOperationëŠ” ìƒìœ„ íƒ€ì…ì¸ BasicOperationì˜ ìš”ì†Œë¡œ ì¸ì •í•˜ì§€ë§Œ ìƒìœ„ íƒ€ì…ì¸ BasicOperationì˜ ìƒìˆ˜ëŠ” í•˜ìœ„ íƒ€ì…ì˜ ExtendedOperationë¡œ ì¸ì •ëª»í•˜ëŠ” ê²ƒì€ ì´ìƒí•˜ë‹¤.
    - ìƒìœ„, í•˜ìœ„íƒ€ì…ì˜ ëª¨ë“  ìƒìˆ˜ë¥¼ ìˆœíšŒí•˜ëŠ” ë°©ë²•ì´ ì—†ë‹¤.
    - ì„¤ê³„ì™€ êµ¬í˜„ì´ ë³µì¡í•´ì§„ë‹¤.

### ê·¸ëŸ¬ë‚˜ enumì„ í™•ì¥í•´ì„œ ì‚¬ìš©í•˜ê¸° ì¢‹ì€ ì˜ˆì‹œ

- í™•ì¥í•  ìˆ˜ ìˆëŠ” enumì„ ì ìš©í•˜ê¸° ê´œì°®ì€ ì˜ˆì‹œëŠ” ì—°ì‚° ì½”ë“œê°€ ìˆë‹¤.
- ê¸°ë³¸ ì—°ì‚°ì„ í™•ì¥í•œ ì—°ì‚°ì„ ì œê³µí•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.

#### ì¸í„°í˜ì´ìŠ¤ë¥¼ ì´ìš©í•œ enum í™•ì¥

- ì¸í„°í˜ì´ìŠ¤ë¥¼ ì´ìš©í•´ í™•ì¥ ê°€ëŠ¥í•œ enumì„ í‰ë‚´ë‚´ë³´ì

```java
public interface Operation {
  doubly apply(double x, double y);
}
```

- ì—°ì‚°ìš© ì¸í„°í˜ì´ìŠ¤

```java
public enum BasicOperation implements Operation {
    PLUS("+") {
        @Override
        public double apply(double x, double y) {
            return x + y;
        }
    },
    MINUS("-") {
        @Override
        public double apply(double x, double y) {
            return x - y;
        }
    },
    TIMES("*") {
        @Override
        public double apply(double x, double y) {
            return x * y;
        }
    },
    DIVIDE("/") {
        @Override
        public double apply(double x, double y) {
            return x / y;
        }
    };

    private final String symbol;

    BasicOperation(String symbol) {
        this.symbol = symbol;
    }
}
```

- Operationì„ í™•ì¥í•œ ê¸°ë³¸ Enum
- ì´ ë°©ë²•ì„ ì‚¬ìš©í•˜ë©´ enum íƒ€ì…ì— ì¶”ìƒ ë©”ì„œë“œë¥¼ ì„ ì–¸í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.

```java
public enum ExtendedOperation implements Operation {
    EXP("++") {
        @Override
        public double apply(double x, double y) {
            return Math.pow(x, y);
        }
    },
    REMAINDER("--") {
        @Override
        public double apply(double x, double y) {
            return x % y;
        }
    };

    private final String symbol;

    ExtendedOperation(String symbol) {
        this.symbol = symbol;
    }
}
```

- Operationì„ í™•ì¥í•œ í™•ì¥ Enum

```java
    public static void main(String[] args) {
        double x = 1.5;
        double y = 3.0;

        test(EnumSet.allOf(BasicOperation.class), x, y);
        test(EnumSet.allOf(ExtendedOperation.class), x, y);
        test(Set.of(BasicOperation.PLUS, ExtendedOperation.MARS_PLUS), x, y);
    }
```

- Operation íƒ€ì…ìœ¼ë¡œ ì„ ì–¸ë˜ì–´ ìˆìœ¼ë©´ êµ¬í˜„ì²´ë§Œ ë³€ê²½í•´ì„œ ë‹¤í˜•ì„±ì„ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.

```java
private static **<T extends Enum<T> & Operation>** void test (**Class<T> opEnumType**, 
    double x, double y) {
        for (Operation op : opEnumType.getEnumConstants()) {
            System.out.printf("%f %s %f = %f%n", x, op, y, op.apply(x, y));
        }
    }
```

- í•œì •ì  íƒ€ì… ë§¤ê°œ ë³€ìˆ˜ë¥¼ ì´ìš©í•œ ë°©ë²•
- **<T extends Enum<T> & Operation>** ëŠ” Class ê°ì²´ê°€ enum íƒ€ì…ì¸ ë™ì‹œì— Operationì˜ í•˜ìœ„ íƒ€ì…ì´ì–´ì•¼ í•œë‹¤ëŠ” ëœ»

```java
  private static void test(Collection<? extends Operation> opSet, double x, double y) {
        for (Operation op : opSet) {
            System.out.printf("%f %s %f = %f%n", x, op, y, op.apply(x, y));
        }
    }
```

- í•œì •ì  ì™€ì¼ë“œ ì¹´ë“œë¥¼ ì´ìš©í•œ ë°©ë²•
- Operationì„ êµ¬í˜„í•œ ê°™ì€ íƒ€ì…ì˜ enumì˜ ìƒìˆ˜ë¥¼ ì¡°í•©í•´ì„œ ì¸ìë¡œ ë³´ë‚¼ ìˆ˜ ìˆë‹¤.
- ê·¸ëŸ¬ë‚˜ **ë‹¤ë¥¸ enunì˜ ìƒìˆ˜**ì— ëŒ€í•´ì„  EnumSet, EnumMapì´ ì œí•œ ëœë‹¤.
    - Operationì„ êµ¬í˜„í–ˆë‹¤ê³  í•´ë„ ë‹¤ë¥¸ enumì˜ ìƒìˆ˜ë„ ê°™ê²Œ ë³´ëŠ”ê±´ ì•„ë‹ˆê¸° ë•Œë¬¸ì´ë‹¤.

```java
test(EnumSet.of(BasicOperation.PLUS, BasicOperation.MINUS), x, y); // ê°€ëŠ¥
test(EnumSet.of(BasicOperation.PLUS, ExtendedOperation.EXP), x, y); // ë¶ˆê°€ëŠ¥
test(EnumSet.of(ExtendedOperation.REMAINDER, ExtendedOperation.EXP), x, y); // ê°€ëŠ¥
```

### ì‚¬ì†Œí•œ ë¬¸ì œ

- ìœ„ ê°™ì€ ë°©ë²•ì—ì„œë„ ì‚¬ì†Œí•œ ë¬¸ì œê°€ ìˆëŠ”ë°, ê°™ì€ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ë‹¤ë¥¸ enum ê°„ì˜ ìƒì†ì€ ë¶ˆê°€ëŠ¥ í•˜ë‹¤.
    - ìë°”ëŠ” ë‹¤ì¤‘ ìƒì†ì´ ë¶ˆê°€ëŠ¥í•˜ê³  ëª¨ë“  enum íƒ€ì…ì€ java.lang.Enum í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ê³  ìˆë‹¤.
- í•´ê²°ì±…
    - ê³µí†µ ë¶€ë¶„ì´ ì ìœ¼ë©´ ê°™ì€ interface ë‚´ì—ì„œ ë””í´íŠ¸ ë©”ì„œë“œë¡œ êµ¬í˜„
    - ê³µí†µ ë¶€ë¶„ì´ ë§ë‹¤ë©´ ë³„ë„ì˜ ë„ìš°ë¯¸ í´ë˜ìŠ¤ë‚˜ ì •ì  ë„ìš°ë¯¸ ë©”ì„œë“œë¡œ ë¶„ë¦¬

### ìë°” ë¼ì´ë¸ŒëŸ¬ë¦¬

- ìœ„ ì˜ˆì‹œì˜ íŒ¨í„´ì„ ì ìš©í•œ ì‚¬ë¡€ê°€ ìˆë‹¤.
- java.nio.file.LinkOption enumì€ CopyOptionê³¼ OpenOption ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í–ˆë‹¤.

```java
public enum LinkOption implements OpenOption, CopyOption {
    /**
     * Do not follow symbolic links.
     *
     * @see Files#getFileAttributeView(Path,Class,LinkOption[])
     * @see Files#copy
     * @see SecureDirectoryStream#newByteChannel
     */
    NOFOLLOW_LINKS;
}
```

```text
ğŸ’¡ ì—´ê±° íƒ€ì… ìì²´ëŠ” í™•ì¥í•  ìˆ˜ ì—†ì§€ë§Œ, **ì¸í„°í˜ì´ìŠ¤ì™€ ê·¸ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ê¸°ë³¸ ì—´ê±° íƒ€ì…ì„ í•¨ê»˜ ì‚¬ìš©í•´ ê°™ì€ íš¨ê³¼ë¥¼ ë‚¼ ìˆ˜ ìˆë‹¤.** 
APIê°€ ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ìœ¼ë¡œ ë˜ì–´ ìˆìœ¼ë©´ êµ¬í˜„ì²´ë§Œ ë³€ê²½í•˜ì—¬  ë‹¤í˜•ì„±ì„ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.
```
