# toString을 항상 재정의하라

---

# toString() 재정의 해야하는 이유

- `Object.toString()`은 단순히 클래스 이름@16진수 해시코드를 반환한다 (eg. PhoneNumber@adbbd)
- `toString`은 일반 규약에 따라 간결하고 사람이 읽기 쉬운 형태로 반환해야한다.
- `toString`의 규약은 **모든 하위 클래스에서 이 메서드를 재정의하라** 이다.
- `toString`을 잘 구현한 클래스는 디버깅하기 쉽다. 직접 호출하지 않더라도 문자열 연결 연산자, println, assert 구문 등 다른 어딘가에서 쓰인다.

---

# toString() 규약

- **객체가 가진 주요 정보를 모두 반환하는게 좋다.**
    - 이상적으로 스스로를 완벽히 설명하는 문자열이면 좋다.
- 구현할 때 반환값의 포맷을 문서화할지 정해야 한다.
    - 포맷을 명시하면 표준적이고, 그 값 그대로 다른 데이터로 활용할 수 있다.
    - 하지만, 포맷을 한 번 명시하면 (그 클래스가 많이 쓰인다면) 포맷을 사용하는 클라이언트가 존재하기 때문에 평생 그 포맷에 얽매이게 될 수 있다.
- **포맷을 명시하든 아니든 toString()은 의도를 분명히 밝혀야 한다.**

```java
		/**
     * 이 전화번호의 문자열 표현을 반환한다. 이 문자열은 "'X0X-YYY-ZZZZ" 형태의 12글자로 구성된다. XXX는 지역 코드, YYY는 프리픽스, ZZZZ는 가입자
     * 번호다. 각각의 대문자는 10진수 숫자 하나를 나타낸다. 옷 전화번호의 각 부분의 값이 너무 작아서 자릿수를 채울 수 없다면, 앞에서부터 0으로 채워나간다. 예컨대
     * 가입자 번호가 123이라면 전화번호의 마지막 네 문자는 "0123"이 된다.
     */
    @Override
    public String toString() {
        return String.format(
                "%03d-%03d-%04d",
                areaCode,
                prefix,
                lineNum
        );
    }

		/**
		* 이 약물에 관한 대략적인 설명을 반환한다.
		* 다음은 이 설명의 일반적인 형태이나,
		* 상세 형식은 정해지지 않았으며 향후 변경될 수 있다.
		*"[약물 #9: 유형=사랑, 냄새-테레빈유, 겉모습=먹물]"
		*/
			@override public String toString() {... }
```

- **포맷 명시 여부와 상관없이 toString이 반환한 값에 포함된 정보를 얻어올 수 있는 API를 제공하자.**
    - 그렇지 않으면 이 정보가 필요한 클라이언트는 toString() 반환값을 파싱할 수 밖에 없다.


---

# toString() 언제 재정의?

- 정적 유틸리티 클래스에서는 toString을 제공할 이유가 없다. (상태를 가지지 않기 때문)
- 또한 열거 타입도 자바에서 이미 완벽한 toString을 제공하니 따로 재정의하지 않아도 된다.
- **하위 클래스들이 공유해야 할 문자열 표현이 있는 추상 클래스라면 toString을 재정의해줘야 한다.**
    - eg. 대다수의 컬렉션 구현체는 추상 컬렉션 클래스들의 toString 메서드를 상속해서 사용한다

---

# 정리

- **모든 구체 클래스에서 Object의 toString()을 재정의하자**
    - 상위 클래스에서 이미 알맞게 재정의한 경우는 예외